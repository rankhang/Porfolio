import{__assign as r,__awaiter as t,__generator as e}from"tslib";import{Auth as n}from"aws-amplify";import{actions as o}from"xstate";import"../../types/authenticator/user.mjs";import"../../types/authenticator/attributes.mjs";import"../../types/primitives/componentClassName.mjs";import"lodash/isEqual.js";import"lodash/isEmpty.js";import"lodash/debounce.js";import"lodash/isNil.js";import"lodash/includes.js";import"lodash/get.js";import"lodash/pickBy.js";import"lodash/has.js";import"lodash/kebabCase.js";import"lodash/merge.js";import"../../i18n/translations.mjs";import{trimValues as a}from"../../helpers/authenticator/utils.mjs";import"../../helpers/accountSettings/utils.mjs";var u=o.assign,i=o.stop,s=function(r){return i(r)},c=u({attributeToVerify:function(r){}}),m=u({challengeName:function(r){}}),l=u({requiredAttributes:function(r){}}),d=u({remoteError:function(r){return""}}),f=u({formValues:function(r){return{}}}),p=u({touched:function(r){return{}}}),v=u({unverifiedContactMethods:function(r){}}),h=u({username:function(r){}}),b=u({validationError:function(r){return{}}}),j=u({totpSecretCode:function(r,t){return t.data}}),g=u({challengeName:function(r,t){var e;return null===(e=t.data)||void 0===e?void 0:e.challengeName}}),V=u({requiredAttributes:function(r,t){var e,n;return null===(n=null===(e=t.data)||void 0===e?void 0:e.challengeParam)||void 0===n?void 0:n.requiredAttributes}}),y=u({redirectIntent:function(r){return"confirmPasswordReset"}}),_=u({redirectIntent:function(r){return"confirmSignUp"}}),w=u({authAttributes:function(r,t){var e,n,o=r.loginMechanisms[0];return{username:null!==(e=r.formValues[o])&&void 0!==e?e:r.formValues.username,password:null===(n=r.formValues)||void 0===n?void 0:n.password}}}),E=u({validationError:function(r,t){return t.data}}),A=u({remoteError:function(r,t){var e;return"NoUserPoolError"===t.data.name?"Configuration error (see console) â€“ please contact the administrator":(null===(e=t.data)||void 0===e?void 0:e.message)||t.data}}),C=u({unverifiedContactMethods:function(r,t){return t.data.unverified}}),N=u({user:function(r,t){return t.data.user||t.data}}),q=u({username:function(r,t){var e=r.formValues,n=e.username,o=e.country_code;return o&&(n="".concat(o).concat(n)),n}}),D=u({codeDeliveryDetails:function(r,t){return t.data.codeDeliveryDetails}}),M=u({authAttributes:function(r,t){return{username:r.formValues.username}}}),P=u({formValues:function(t,e){var n,o=e.data,a=o.name,u=o.value;return r(r({},t.formValues),((n={})[a]=u,n))}}),S=u({formValues:function(t,e){var n=r(r({},t.formValues),e.data);return a(n,"password")}}),k=u({touched:function(t,e){var n,o=e.data.name;return r(r({},t.touched),((n={})["".concat(o)]=!0,n))}}),x=function(r){return t(void 0,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return t=r.username,[4,n.forgotPassword(t)];case 1:return[2,e.sent()]}}))}))},I=u({formValues:function(t,e){var n,o,a=t.loginMechanisms[0],u=void 0===a?"username":a;if(!t.formValues.phone_number&&"phone_number"!==u)return t.formValues;var i=t.formValues,s=t.country_code,c=i.phone_number?"phone_number":"username",m="".concat(null!==(o=i.country_code)&&void 0!==o?o:s).concat(i[c]).replace(/[^A-Z0-9+]/gi,""),l=r(r({},i),((n={})[c]=m,n));return delete l.country_code,l}});export{c as clearAttributeToVerify,m as clearChallengeName,d as clearError,f as clearFormValues,l as clearRequiredAttributes,p as clearTouched,v as clearUnverifiedContactMethods,h as clearUsername,b as clearValidationError,k as handleBlur,P as handleInput,S as handleSubmit,I as parsePhoneNumber,x as resendCode,g as setChallengeName,D as setCodeDeliveryDetails,y as setConfirmResetPasswordIntent,_ as setConfirmSignUpIntent,w as setCredentials,E as setFieldErrors,A as setRemoteError,V as setRequiredAttributes,j as setTotpSecretCode,C as setUnverifiedContactMethods,N as setUser,q as setUsername,M as setUsernameAuthAttributes,s as stopActor};
