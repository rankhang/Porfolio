import{__awaiter as t,__generator as r,__assign as n}from"tslib";import{Amplify as s,Auth as i}from"aws-amplify";import"../../types/authenticator/user.mjs";import"../../types/authenticator/attributes.mjs";import"../../types/primitives/componentClassName.mjs";import"lodash/isEqual.js";import"lodash/isEmpty.js";import"lodash/debounce.js";import"lodash/isNil.js";import"lodash/includes.js";import"lodash/get.js";import"lodash/pickBy.js";import"lodash/has.js";import"lodash/kebabCase.js";import"lodash/merge.js";import"../../i18n/translations.mjs";import{hasSpecialChars as o}from"../../helpers/authenticator/utils.mjs";import"../../helpers/accountSettings/utils.mjs";var e={getAmplifyConfig:function(){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,s.configure()]}))}))},getCurrentUser:function(){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,i.currentAuthenticatedUser()]}))}))},handleSignUp:function(s){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,i.signUp(n(n({},s),{autoSignIn:{enabled:!0}}))]}))}))},handleSignIn:function(n){var s=n.username,o=n.password;return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,i.signIn(s,o)]}))}))},handleConfirmSignIn:function(n){var s=n.user,o=n.code,e=n.mfaType;return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,i.confirmSignIn(s,o,e)]}))}))},handleConfirmSignUp:function(n){var s=n.username,o=n.code;return t(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,i.confirmSignUp(s,o)];case 1:return[2,t.sent()]}}))}))},handleForgotPasswordSubmit:function(n){var s=n.username,o=n.code,e=n.password;return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,i.forgotPasswordSubmit(s,o,e)]}))}))},handleForgotPassword:function(n){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,i.forgotPassword(n)]}))}))},validateCustomSignUp:function(n,s){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2]}))}))},validateFormPassword:function(n,s,i){return t(this,void 0,void 0,(function(){var t,e,u,a;return r(this,(function(r){return t=n.password,s.password&&i?(e=[],u=+(null==i?void 0:i.passwordPolicyMinLength),t.length<u&&e.push("Password must have at least ".concat(u," characters")),null==(a=null==i?void 0:i.passwordPolicyCharacters)||a.forEach((function(r){switch(r){case"REQUIRES_LOWERCASE":/[a-z]/.test(t)||e.push("Password must have lower case letters");break;case"REQUIRES_UPPERCASE":/[A-Z]/.test(t)||e.push("Password must have upper case letters");break;case"REQUIRES_NUMBERS":/[0-9]/.test(t)||e.push("Password must have numbers");break;case"REQUIRES_SYMBOLS":o(t)||e.push("Password must have special characters")}})),[2,0!==e.length?{password:e}:null]):[2,null]}))}))},validateConfirmPassword:function(n,s){return t(this,void 0,void 0,(function(){var t,i,o,e;return r(this,(function(r){return t=n.password,i=n.confirm_password,o=s.confirm_password,e=s.password,t||i?(t||i)&&t!==i&&(o&&e||(null==t?void 0:t.length)>=6&&(null==i?void 0:i.length)>=6)?[2,{confirm_password:"Your passwords must match"}]:[2]:[2,null]}))}))},validatePreferredUsername:function(n,s){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2]}))}))}};export{e as defaultServices};
