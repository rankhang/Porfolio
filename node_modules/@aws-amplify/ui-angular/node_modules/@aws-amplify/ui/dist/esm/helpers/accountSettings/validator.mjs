import{__spreadArray as e}from"tslib";import{Amplify as s}from"aws-amplify";import"../../types/authenticator/user.mjs";import"../../types/authenticator/attributes.mjs";import"../../types/primitives/componentClassName.mjs";import"lodash/isEqual.js";import"lodash/isEmpty.js";import"lodash/debounce.js";import"lodash/isNil.js";import"lodash/includes.js";import"lodash/get.js";import"lodash/pickBy.js";import"lodash/has.js";import"lodash/kebabCase.js";import"lodash/merge.js";import"../../i18n/translations.mjs";import{hasSpecialChars as t}from"../authenticator/utils.mjs";var a=function(){var e=s.configure(),t=null==e?void 0:e.aws_cognito_password_protection_settings;if(!t)return null;var a=t.passwordPolicyCharacters,r=void 0===a?[]:a;return{minLength:t.passwordPolicyMinLength,needsLowerCase:r.includes("REQUIRES_LOWERCASE"),needsUpperCase:r.includes("REQUIRES_UPPERCASE"),needsNumber:r.includes("REQUIRES_NUMBERS"),needsSpecialChar:r.includes("REQUIRES_SYMBOLS")}},r=function(e){return{validationMode:"onTouched",validator:function(s){return s.length>=e},message:"Password must have at least ".concat(e," characters")}},o={validationMode:"onTouched",validator:function(e){return/[a-z]/.test(e)},message:"Password must have lower case letters"},n={validationMode:"onTouched",validator:function(e){return/[A-Z]/.test(e)},message:"Password must have upper case letters"},i={validationMode:"onTouched",validator:function(e){return/[0-9]/.test(e)},message:"Password must have numbers"},u={validationMode:"onTouched",validator:function(e){return t(e)},message:"Password must have special characters"},d=function(e){return{validationMode:"onTouched",validator:function(s){return e===s},message:"Your passwords must match"}},l=function(){var e=a();if(!e)return[];var s=[],t=e.minLength,d=e.needsLowerCase,l=e.needsUpperCase,c=e.needsNumber,m=e.needsSpecialChar;return t&&s.push(r(t)),d&&s.push(o),l&&s.push(n),c&&s.push(i),m&&s.push(u),s},c=function(e){return[d(e)]},m=function(e){var s=e.validationMode,t=e.eventType,a=e.hasBlurred;switch(s){case"onBlur":return"blur"===t;case"onChange":return"change"===t;case"onTouched":return"blur"===t||a}},p=function(s){var t=s.value,a=s.validators,r=s.eventType,o=s.hasBlurred;return t?a.reduce((function(s,a){var n=a.validator,i=a.validationMode,u=a.message;if(m({validationMode:i,eventType:r,hasBlurred:o}))return!n(t)?e(e([],s,!0),[u],!1):s}),[]):[]};export{c as getDefaultConfirmPasswordValidators,l as getDefaultPasswordValidators,r as getHasMinLength,d as getMatchesConfirmPassword,a as getPasswordRequirement,o as hasLowerCase,i as hasNumber,u as hasSpecialChar,n as hasUpperCase,p as runFieldValidators,m as shouldValidate};
