import { __awaiter } from "tslib";
import { Component, ContentChildren, Input, ViewEncapsulation, } from '@angular/core';
import { authenticatorTextUtil, configureComponent, defaultAuthHubHandler, listenToAuthHub, } from '@aws-amplify/ui';
import { AmplifySlotDirective } from '../../../../utilities/amplify-slot/amplify-slot.directive';
import { CustomComponentsService } from '../../../../services/custom-components.service';
import { VERSION } from '../../../../../version';
import * as i0 from "@angular/core";
import * as i1 from "../../../../services/authenticator.service";
import * as i2 from "../../../../services/custom-components.service";
import * as i3 from "../../../../utilities/amplify-slot/amplify-slot.component";
import * as i4 from "../../../../primitives/tabs/tabs.component";
import * as i5 from "../../../../primitives/tab-item/tab-item.component";
import * as i6 from "../sign-in/sign-in.component";
import * as i7 from "../sign-up/sign-up.component";
import * as i8 from "../confirm-sign-up/confirm-sign-up.component";
import * as i9 from "../confirm-sign-in/confirm-sign-in.component";
import * as i10 from "../setup-totp/setup-totp.component";
import * as i11 from "../force-new-password/force-new-password.component";
import * as i12 from "../reset-password/reset-password.component";
import * as i13 from "../confirm-reset-password/amplify-confirm-reset-password.component";
import * as i14 from "../verify-user/verify-user.component";
import * as i15 from "../confirm-verify-user/amplify-confirm-verify-user.component";
import * as i16 from "@angular/common";
const { getSignInTabText, getSignUpTabText } = authenticatorTextUtil;
export class AuthenticatorComponent {
    constructor(authenticator, contextService, changeDetector) {
        this.authenticator = authenticator;
        this.contextService = contextService;
        this.changeDetector = changeDetector;
        this.customComponentQuery = null;
        // translated texts
        this.signInTitle = getSignInTabText();
        this.signUpTitle = getSignUpTabText();
        this.hasInitialized = false;
        this.isHandlingHubEvent = false;
    }
    ngOnInit() {
        const { initialState, loginMechanisms, services, signUpAttributes, socialProviders, formFields, } = this;
        configureComponent({
            packageName: '@aws-amplify/ui-angular',
            version: VERSION,
        });
        const { authService, initializeMachine } = this.authenticator;
        this.unsubscribeHub = listenToAuthHub(authService, (data, service) => __awaiter(this, void 0, void 0, function* () {
            yield defaultAuthHubHandler(data, service);
            /**
             * Hub events aren't properly caught by Angular, because they are
             * synchronous events. Angular tracks async network events and
             * html events, but not synchronous events like hub.
             *
             * On any notable hub events, we run change detection manually.
             */
            this.changeDetector.detectChanges();
            /**
             * Hub events that we handle can lead to multiple state changes:
             * e.g. `authenticated` -> `signOut` -> initialState.
             *
             * We want to ensure change detection runs all the way, until
             * we reach back to the initial state. Setting the below flag
             * to true to until we reach initial state.
             */
            this.isHandlingHubEvent = true;
        }));
        /**
         * Subscribes to state machine changes and sends INIT event
         * once machine reaches 'setup' state.
         */
        this.unsubscribeMachine = this.authenticator.subscribe(() => {
            const { route } = this.authenticator;
            if (this.isHandlingHubEvent) {
                this.changeDetector.detectChanges();
                const initialStateWithDefault = initialState !== null && initialState !== void 0 ? initialState : 'signIn';
                // We can stop manual change detection if we're back to the initial state
                if (route === initialStateWithDefault) {
                    this.isHandlingHubEvent = false;
                }
            }
            if (!this.hasInitialized && route === 'setup') {
                initializeMachine({
                    initialState,
                    loginMechanisms,
                    services,
                    signUpAttributes,
                    socialProviders,
                    formFields,
                });
                this.hasInitialized = true;
            }
        }).unsubscribe;
        /**
         * handling translations after content init, because authenticator and its
         * translations might be initialized before the main app's `ngOnInit` is run.
         */
        this.signInTitle = getSignInTabText();
        this.signUpTitle = getSignUpTabText();
    }
    /**
     * Lifecycle Methods
     */
    ngAfterContentInit() {
        this.contextService.customComponents = this.mapCustomComponents(this.customComponentQuery);
    }
    ngOnDestroy() {
        if (this.unsubscribeMachine)
            this.unsubscribeMachine();
        if (this.unsubscribeHub)
            this.unsubscribeHub();
    }
    /**
     * Class Functions
     */
    // context passed to "authenticated" slot
    get context() {
        return this.authenticator.slotContext;
    }
    get route() {
        return this.authenticator.route;
    }
    onTabChange() {
        const route = this.authenticator.route;
        if (route === 'signIn') {
            this.authenticator.toSignUp();
        }
        else {
            this.authenticator.toSignIn();
        }
    }
    hasTabs() {
        const { route } = this.authenticator;
        return route === 'signIn' || route === 'signUp';
    }
    hasRouteComponent() {
        const { route } = this.authenticator;
        switch (route) {
            case 'authenticated':
            case 'idle':
            case 'setup':
            case 'signOut':
            case 'transition':
                return false;
            default:
                return true;
        }
    }
    mapCustomComponents(componentQuery) {
        if (!componentQuery)
            return {};
        const customComponents = {};
        componentQuery.forEach((component) => {
            customComponents[component.name] = component.template;
        });
        return customComponents;
    }
}
AuthenticatorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: AuthenticatorComponent, deps: [{ token: i1.AuthenticatorService }, { token: i2.CustomComponentsService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
AuthenticatorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.16", type: AuthenticatorComponent, selector: "amplify-authenticator", inputs: { formFields: "formFields", initialState: "initialState", loginMechanisms: "loginMechanisms", services: "services", signUpAttributes: "signUpAttributes", socialProviders: "socialProviders", variation: "variation", hideSignUp: "hideSignUp" }, providers: [CustomComponentsService], queries: [{ propertyName: "customComponentQuery", predicate: AmplifySlotDirective }], ngImport: i0, template: "<div\n  data-amplify-authenticator\n  [attr.data-variation]=\"variation\"\n  *ngIf=\"hasRouteComponent()\"\n>\n  <div data-amplify-container>\n    <amplify-slot name=\"header\" [context]=\"context\"></amplify-slot>\n    <div\n      data-amplify-router\n      [attr.data-amplify-router-content]=\"hasTabs() ? undefined : ''\"\n    >\n      <amplify-tabs\n        (tabChange)=\"onTabChange()\"\n        *ngIf=\"(route === 'signIn' || route === 'signUp') && !hideSignUp\"\n      >\n        <amplify-tab-item\n          [title]=\"signInTitle\"\n          [active]=\"route === 'signIn'\"\n          data-amplify-router-content\n        >\n          <!-- signIn component -->\n          <amplify-slot\n            name=\"sign-in\"\n            [context]=\"context\"\n            *ngIf=\"route === 'signIn'\"\n          >\n            <amplify-sign-in></amplify-sign-in>\n          </amplify-slot>\n        </amplify-tab-item>\n        <amplify-tab-item\n          [title]=\"signUpTitle\"\n          [active]=\"route === 'signUp'\"\n          data-amplify-router-content\n        >\n          <!-- signUp component -->\n          <amplify-slot\n            name=\"sign-up\"\n            [context]=\"context\"\n            *ngIf=\"route === 'signUp'\"\n          >\n            <amplify-sign-up></amplify-sign-up>\n          </amplify-slot>\n        </amplify-tab-item>\n      </amplify-tabs>\n\n      <amplify-slot\n        name=\"sign-in\"\n        [context]=\"context\"\n        *ngIf=\"route === 'signIn' && hideSignUp\"\n      >\n        <amplify-sign-in></amplify-sign-in>\n      </amplify-slot>\n\n      <!-- confirmSignUp content -->\n      <amplify-slot\n        name=\"confirm-sign-up\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmSignUp'\"\n      >\n        <amplify-confirm-sign-up></amplify-confirm-sign-up>\n      </amplify-slot>\n\n      <!-- confirmSignIn content -->\n      <amplify-slot\n        name=\"confirm-sign-in\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmSignIn'\"\n      >\n        <amplify-confirm-sign-in></amplify-confirm-sign-in>\n      </amplify-slot>\n\n      <!-- setupTotp content -->\n      <amplify-slot\n        name=\"setup-totp\"\n        [context]=\"context\"\n        *ngIf=\"route === 'setupTOTP'\"\n      >\n        <amplify-setup-totp></amplify-setup-totp>\n      </amplify-slot>\n\n      <!-- forceNewPassword content -->\n      <amplify-slot\n        name=\"force-new-password\"\n        [context]=\"context\"\n        *ngIf=\"route === 'forceNewPassword'\"\n      >\n        <amplify-force-new-password></amplify-force-new-password>\n      </amplify-slot>\n\n      <!-- resetPassword content -->\n      <amplify-slot\n        name=\"reset-password\"\n        [context]=\"context\"\n        *ngIf=\"route === 'resetPassword'\"\n      >\n        <amplify-reset-password></amplify-reset-password>\n      </amplify-slot>\n\n      <!-- confirmResetPassword content -->\n      <amplify-slot\n        name=\"confirm-reset-password\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmResetPassword'\"\n      >\n        <amplify-confirm-reset-password></amplify-confirm-reset-password>\n      </amplify-slot>\n\n      <!-- verifyUser content -->\n      <amplify-slot\n        name=\"verify-user\"\n        [context]=\"context\"\n        *ngIf=\"route === 'verifyUser'\"\n      >\n        <amplify-verify-user></amplify-verify-user>\n      </amplify-slot>\n\n      <!-- confirmVerifyUser content -->\n      <amplify-slot\n        name=\"confirm-verify-user\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmVerifyUser'\"\n      >\n        <amplify-confirm-verify-user></amplify-confirm-verify-user>\n      </amplify-slot>\n    </div>\n\n    <amplify-slot name=\"footer\" [context]=\"context\"></amplify-slot>\n  </div>\n</div>\n\n<!-- signedIn content is rendered outside authenticator so it's not styled by authenticator -->\n<amplify-slot\n  name=\"authenticated\"\n  [context]=\"context\"\n  *ngIf=\"route === 'authenticated'\"\n>\n  <ng-content></ng-content>\n</amplify-slot>\n", components: [{ type: i3.AmplifySlotComponent, selector: "amplify-slot", inputs: ["name", "context"] }, { type: i4.TabsComponent, selector: "amplify-tabs", outputs: ["tabChange"] }, { type: i5.TabItemComponent, selector: "amplify-tab-item", inputs: ["title", "active", "id", "labelledById", "tabIndex"] }, { type: i6.SignInComponent, selector: "amplify-sign-in" }, { type: i7.SignUpComponent, selector: "amplify-sign-up" }, { type: i8.ConfirmSignUpComponent, selector: "amplify-confirm-sign-up" }, { type: i9.ConfirmSignInComponent, selector: "amplify-confirm-sign-in" }, { type: i10.SetupTotpComponent, selector: "amplify-setup-totp" }, { type: i11.ForceNewPasswordComponent, selector: "amplify-force-new-password", inputs: ["headerText"] }, { type: i12.ResetPasswordComponent, selector: "amplify-reset-password", inputs: ["headerText"] }, { type: i13.ConfirmResetPasswordComponent, selector: "amplify-confirm-reset-password", inputs: ["headerText"] }, { type: i14.VerifyUserComponent, selector: "amplify-verify-user", inputs: ["headerText"] }, { type: i15.ConfirmVerifyUserComponent, selector: "amplify-confirm-verify-user", inputs: ["headerText"] }], directives: [{ type: i16.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], encapsulation: i0.ViewEncapsulation.None });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.16", ngImport: i0, type: AuthenticatorComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'amplify-authenticator',
                    templateUrl: './authenticator.component.html',
                    providers: [CustomComponentsService],
                    encapsulation: ViewEncapsulation.None,
                }]
        }], ctorParameters: function () { return [{ type: i1.AuthenticatorService }, { type: i2.CustomComponentsService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { formFields: [{
                type: Input
            }], initialState: [{
                type: Input
            }], loginMechanisms: [{
                type: Input
            }], services: [{
                type: Input
            }], signUpAttributes: [{
                type: Input
            }], socialProviders: [{
                type: Input
            }], variation: [{
                type: Input
            }], hideSignUp: [{
                type: Input
            }], customComponentQuery: [{
                type: ContentChildren,
                args: [AmplifySlotDirective]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0aGVudGljYXRvci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS1hbmd1bGFyL3NyYy9saWIvY29tcG9uZW50cy9hdXRoZW50aWNhdG9yL2NvbXBvbmVudHMvYXV0aGVudGljYXRvci9hdXRoZW50aWNhdG9yLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpLWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL2F1dGhlbnRpY2F0b3IvY29tcG9uZW50cy9hdXRoZW50aWNhdG9yL2F1dGhlbnRpY2F0b3IuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFHTCxTQUFTLEVBQ1QsZUFBZSxFQUNmLEtBQUssRUFLTCxpQkFBaUIsR0FDbEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUVMLHFCQUFxQixFQUNyQixrQkFBa0IsRUFDbEIscUJBQXFCLEVBQ3JCLGVBQWUsR0FFaEIsTUFBTSxpQkFBaUIsQ0FBQztBQUN6QixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwyREFBMkQsQ0FBQztBQUNqRyxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUV6RixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVqRCxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQUUsR0FBRyxxQkFBcUIsQ0FBQztBQVFyRSxNQUFNLE9BQU8sc0JBQXNCO0lBd0JqQyxZQUNVLGFBQW1DLEVBQ25DLGNBQXVDLEVBQ3ZDLGNBQWlDO1FBRmpDLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtRQUNuQyxtQkFBYyxHQUFkLGNBQWMsQ0FBeUI7UUFDdkMsbUJBQWMsR0FBZCxjQUFjLENBQW1CO1FBZG5DLHlCQUFvQixHQUFvQyxJQUFJLENBQUM7UUFFckUsbUJBQW1CO1FBQ1osZ0JBQVcsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO1FBQ2pDLGdCQUFXLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztRQUVoQyxtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUN2Qix1QkFBa0IsR0FBRyxLQUFLLENBQUM7SUFRaEMsQ0FBQztJQUVKLFFBQVE7UUFDTixNQUFNLEVBQ0osWUFBWSxFQUNaLGVBQWUsRUFDZixRQUFRLEVBQ1IsZ0JBQWdCLEVBQ2hCLGVBQWUsRUFDZixVQUFVLEdBQ1gsR0FBRyxJQUFJLENBQUM7UUFFVCxrQkFBa0IsQ0FBQztZQUNqQixXQUFXLEVBQUUseUJBQXlCO1lBQ3RDLE9BQU8sRUFBRSxPQUFPO1NBQ2pCLENBQUMsQ0FBQztRQUVILE1BQU0sRUFBRSxXQUFXLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBRTlELElBQUksQ0FBQyxjQUFjLEdBQUcsZUFBZSxDQUNuQyxXQUFXLEVBQ1gsQ0FBTyxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUU7WUFDdEIsTUFBTSxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDM0M7Ozs7OztlQU1HO1lBQ0gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUVwQzs7Ozs7OztlQU9HO1lBQ0gsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztRQUNqQyxDQUFDLENBQUEsQ0FDRixDQUFDO1FBRUY7OztXQUdHO1FBQ0gsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtZQUMxRCxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztZQUVyQyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtnQkFDM0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztnQkFFcEMsTUFBTSx1QkFBdUIsR0FBRyxZQUFZLGFBQVosWUFBWSxjQUFaLFlBQVksR0FBSSxRQUFRLENBQUM7Z0JBRXpELHlFQUF5RTtnQkFDekUsSUFBSSxLQUFLLEtBQUssdUJBQXVCLEVBQUU7b0JBQ3JDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7aUJBQ2pDO2FBQ0Y7WUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsSUFBSSxLQUFLLEtBQUssT0FBTyxFQUFFO2dCQUM3QyxpQkFBaUIsQ0FBQztvQkFDaEIsWUFBWTtvQkFDWixlQUFlO29CQUNmLFFBQVE7b0JBQ1IsZ0JBQWdCO29CQUNoQixlQUFlO29CQUNmLFVBQVU7aUJBQ1gsQ0FBQyxDQUFDO2dCQUVILElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO2FBQzVCO1FBQ0gsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDO1FBRWY7OztXQUdHO1FBQ0gsSUFBSSxDQUFDLFdBQVcsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxXQUFXLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztJQUN4QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQzdELElBQUksQ0FBQyxvQkFBb0IsQ0FDMUIsQ0FBQztJQUNKLENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxJQUFJLENBQUMsa0JBQWtCO1lBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDdkQsSUFBSSxJQUFJLENBQUMsY0FBYztZQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUNqRCxDQUFDO0lBRUQ7O09BRUc7SUFFSCx5Q0FBeUM7SUFDekMsSUFBVyxPQUFPO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7SUFDeEMsQ0FBQztJQUVELElBQVcsS0FBSztRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7SUFDbEMsQ0FBQztJQUVNLFdBQVc7UUFDaEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7UUFDdkMsSUFBSSxLQUFLLEtBQUssUUFBUSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDL0I7YUFBTTtZQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDL0I7SUFDSCxDQUFDO0lBRU0sT0FBTztRQUNaLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQ3JDLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxLQUFLLEtBQUssUUFBUSxDQUFDO0lBQ2xELENBQUM7SUFFTSxpQkFBaUI7UUFDdEIsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFFckMsUUFBUSxLQUFLLEVBQUU7WUFDYixLQUFLLGVBQWUsQ0FBQztZQUNyQixLQUFLLE1BQU0sQ0FBQztZQUNaLEtBQUssT0FBTyxDQUFDO1lBQ2IsS0FBSyxTQUFTLENBQUM7WUFDZixLQUFLLFlBQVk7Z0JBQ2YsT0FBTyxLQUFLLENBQUM7WUFDZjtnQkFDRSxPQUFPLElBQUksQ0FBQztTQUNmO0lBQ0gsQ0FBQztJQUVPLG1CQUFtQixDQUN6QixjQUErQztRQUUvQyxJQUFJLENBQUMsY0FBYztZQUFFLE9BQU8sRUFBRSxDQUFDO1FBQy9CLE1BQU0sZ0JBQWdCLEdBQXFDLEVBQUUsQ0FBQztRQUM5RCxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7WUFDbkMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLGdCQUFnQixDQUFDO0lBQzFCLENBQUM7O29IQWxMVSxzQkFBc0I7d0dBQXRCLHNCQUFzQiwwU0FIdEIsQ0FBQyx1QkFBdUIsQ0FBQywrREFlbkIsb0JBQW9CLDZCQzdDdkMsNi9IQTBJQTs0RkR6R2Esc0JBQXNCO2tCQU5sQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSx1QkFBdUI7b0JBQ2pDLFdBQVcsRUFBRSxnQ0FBZ0M7b0JBQzdDLFNBQVMsRUFBRSxDQUFDLHVCQUF1QixDQUFDO29CQUNwQyxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtpQkFDdEM7aUxBSVUsVUFBVTtzQkFBbEIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBR0Usb0JBQW9CO3NCQUQzQixlQUFlO3VCQUFDLG9CQUFvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyQ29udGVudEluaXQsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgSW5wdXQsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBRdWVyeUxpc3QsXG4gIFRlbXBsYXRlUmVmLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBBdXRoZW50aWNhdG9yTWFjaGluZU9wdGlvbnMsXG4gIGF1dGhlbnRpY2F0b3JUZXh0VXRpbCxcbiAgY29uZmlndXJlQ29tcG9uZW50LFxuICBkZWZhdWx0QXV0aEh1YkhhbmRsZXIsXG4gIGxpc3RlblRvQXV0aEh1YixcbiAgU29jaWFsUHJvdmlkZXIsXG59IGZyb20gJ0Bhd3MtYW1wbGlmeS91aSc7XG5pbXBvcnQgeyBBbXBsaWZ5U2xvdERpcmVjdGl2ZSB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdGllcy9hbXBsaWZ5LXNsb3QvYW1wbGlmeS1zbG90LmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBDdXN0b21Db21wb25lbnRzU2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NlcnZpY2VzL2N1c3RvbS1jb21wb25lbnRzLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXV0aGVudGljYXRvclNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi8uLi9zZXJ2aWNlcy9hdXRoZW50aWNhdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3ZlcnNpb24nO1xuXG5jb25zdCB7IGdldFNpZ25JblRhYlRleHQsIGdldFNpZ25VcFRhYlRleHQgfSA9IGF1dGhlbnRpY2F0b3JUZXh0VXRpbDtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYW1wbGlmeS1hdXRoZW50aWNhdG9yJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2F1dGhlbnRpY2F0b3IuY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtDdXN0b21Db21wb25lbnRzU2VydmljZV0sIC8vIG1ha2Ugc3VyZSBjdXN0b20gY29tcG9uZW50cyBhcmUgc2NvcGVkIHRvIHRoaXMgYXV0aGVudGljYXRvciBvbmx5XG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG59KVxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0b3JDb21wb25lbnRcbiAgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQsIE9uRGVzdHJveVxue1xuICBASW5wdXQoKSBmb3JtRmllbGRzOiBBdXRoZW50aWNhdG9yTWFjaGluZU9wdGlvbnNbJ2Zvcm1GaWVsZHMnXTtcbiAgQElucHV0KCkgaW5pdGlhbFN0YXRlOiBBdXRoZW50aWNhdG9yTWFjaGluZU9wdGlvbnNbJ2luaXRpYWxTdGF0ZSddO1xuICBASW5wdXQoKSBsb2dpbk1lY2hhbmlzbXM6IEF1dGhlbnRpY2F0b3JNYWNoaW5lT3B0aW9uc1snbG9naW5NZWNoYW5pc21zJ107XG4gIEBJbnB1dCgpIHNlcnZpY2VzOiBBdXRoZW50aWNhdG9yTWFjaGluZU9wdGlvbnNbJ3NlcnZpY2VzJ107XG4gIEBJbnB1dCgpIHNpZ25VcEF0dHJpYnV0ZXM6IEF1dGhlbnRpY2F0b3JNYWNoaW5lT3B0aW9uc1snc2lnblVwQXR0cmlidXRlcyddO1xuICBASW5wdXQoKSBzb2NpYWxQcm92aWRlcnM6IFNvY2lhbFByb3ZpZGVyW107XG4gIEBJbnB1dCgpIHZhcmlhdGlvbjogJ2RlZmF1bHQnIHwgJ21vZGFsJztcbiAgQElucHV0KCkgaGlkZVNpZ25VcDogYm9vbGVhbjtcblxuICBAQ29udGVudENoaWxkcmVuKEFtcGxpZnlTbG90RGlyZWN0aXZlKVxuICBwcml2YXRlIGN1c3RvbUNvbXBvbmVudFF1ZXJ5OiBRdWVyeUxpc3Q8QW1wbGlmeVNsb3REaXJlY3RpdmU+ID0gbnVsbDtcblxuICAvLyB0cmFuc2xhdGVkIHRleHRzXG4gIHB1YmxpYyBzaWduSW5UaXRsZSA9IGdldFNpZ25JblRhYlRleHQoKTtcbiAgcHVibGljIHNpZ25VcFRpdGxlID0gZ2V0U2lnblVwVGFiVGV4dCgpO1xuXG4gIHByaXZhdGUgaGFzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc0hhbmRsaW5nSHViRXZlbnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSB1bnN1YnNjcmliZU1hY2hpbmU6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgdW5zdWJzY3JpYmVIdWI6IFJldHVyblR5cGU8dHlwZW9mIGxpc3RlblRvQXV0aEh1Yj47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhdXRoZW50aWNhdG9yOiBBdXRoZW50aWNhdG9yU2VydmljZSxcbiAgICBwcml2YXRlIGNvbnRleHRTZXJ2aWNlOiBDdXN0b21Db21wb25lbnRzU2VydmljZSxcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZlxuICApIHt9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgY29uc3Qge1xuICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgbG9naW5NZWNoYW5pc21zLFxuICAgICAgc2VydmljZXMsXG4gICAgICBzaWduVXBBdHRyaWJ1dGVzLFxuICAgICAgc29jaWFsUHJvdmlkZXJzLFxuICAgICAgZm9ybUZpZWxkcyxcbiAgICB9ID0gdGhpcztcblxuICAgIGNvbmZpZ3VyZUNvbXBvbmVudCh7XG4gICAgICBwYWNrYWdlTmFtZTogJ0Bhd3MtYW1wbGlmeS91aS1hbmd1bGFyJyxcbiAgICAgIHZlcnNpb246IFZFUlNJT04sXG4gICAgfSk7XG5cbiAgICBjb25zdCB7IGF1dGhTZXJ2aWNlLCBpbml0aWFsaXplTWFjaGluZSB9ID0gdGhpcy5hdXRoZW50aWNhdG9yO1xuXG4gICAgdGhpcy51bnN1YnNjcmliZUh1YiA9IGxpc3RlblRvQXV0aEh1YihcbiAgICAgIGF1dGhTZXJ2aWNlLFxuICAgICAgYXN5bmMgKGRhdGEsIHNlcnZpY2UpID0+IHtcbiAgICAgICAgYXdhaXQgZGVmYXVsdEF1dGhIdWJIYW5kbGVyKGRhdGEsIHNlcnZpY2UpO1xuICAgICAgICAvKipcbiAgICAgICAgICogSHViIGV2ZW50cyBhcmVuJ3QgcHJvcGVybHkgY2F1Z2h0IGJ5IEFuZ3VsYXIsIGJlY2F1c2UgdGhleSBhcmVcbiAgICAgICAgICogc3luY2hyb25vdXMgZXZlbnRzLiBBbmd1bGFyIHRyYWNrcyBhc3luYyBuZXR3b3JrIGV2ZW50cyBhbmRcbiAgICAgICAgICogaHRtbCBldmVudHMsIGJ1dCBub3Qgc3luY2hyb25vdXMgZXZlbnRzIGxpa2UgaHViLlxuICAgICAgICAgKlxuICAgICAgICAgKiBPbiBhbnkgbm90YWJsZSBodWIgZXZlbnRzLCB3ZSBydW4gY2hhbmdlIGRldGVjdGlvbiBtYW51YWxseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIdWIgZXZlbnRzIHRoYXQgd2UgaGFuZGxlIGNhbiBsZWFkIHRvIG11bHRpcGxlIHN0YXRlIGNoYW5nZXM6XG4gICAgICAgICAqIGUuZy4gYGF1dGhlbnRpY2F0ZWRgIC0+IGBzaWduT3V0YCAtPiBpbml0aWFsU3RhdGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdlIHdhbnQgdG8gZW5zdXJlIGNoYW5nZSBkZXRlY3Rpb24gcnVucyBhbGwgdGhlIHdheSwgdW50aWxcbiAgICAgICAgICogd2UgcmVhY2ggYmFjayB0byB0aGUgaW5pdGlhbCBzdGF0ZS4gU2V0dGluZyB0aGUgYmVsb3cgZmxhZ1xuICAgICAgICAgKiB0byB0cnVlIHRvIHVudGlsIHdlIHJlYWNoIGluaXRpYWwgc3RhdGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzSGFuZGxpbmdIdWJFdmVudCA9IHRydWU7XG4gICAgICB9XG4gICAgKTtcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gc3RhdGUgbWFjaGluZSBjaGFuZ2VzIGFuZCBzZW5kcyBJTklUIGV2ZW50XG4gICAgICogb25jZSBtYWNoaW5lIHJlYWNoZXMgJ3NldHVwJyBzdGF0ZS5cbiAgICAgKi9cbiAgICB0aGlzLnVuc3Vic2NyaWJlTWFjaGluZSA9IHRoaXMuYXV0aGVudGljYXRvci5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgY29uc3QgeyByb3V0ZSB9ID0gdGhpcy5hdXRoZW50aWNhdG9yO1xuXG4gICAgICBpZiAodGhpcy5pc0hhbmRsaW5nSHViRXZlbnQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICAgICAgY29uc3QgaW5pdGlhbFN0YXRlV2l0aERlZmF1bHQgPSBpbml0aWFsU3RhdGUgPz8gJ3NpZ25Jbic7XG5cbiAgICAgICAgLy8gV2UgY2FuIHN0b3AgbWFudWFsIGNoYW5nZSBkZXRlY3Rpb24gaWYgd2UncmUgYmFjayB0byB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgICAgICBpZiAocm91dGUgPT09IGluaXRpYWxTdGF0ZVdpdGhEZWZhdWx0KSB7XG4gICAgICAgICAgdGhpcy5pc0hhbmRsaW5nSHViRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuaGFzSW5pdGlhbGl6ZWQgJiYgcm91dGUgPT09ICdzZXR1cCcpIHtcbiAgICAgICAgaW5pdGlhbGl6ZU1hY2hpbmUoe1xuICAgICAgICAgIGluaXRpYWxTdGF0ZSxcbiAgICAgICAgICBsb2dpbk1lY2hhbmlzbXMsXG4gICAgICAgICAgc2VydmljZXMsXG4gICAgICAgICAgc2lnblVwQXR0cmlidXRlcyxcbiAgICAgICAgICBzb2NpYWxQcm92aWRlcnMsXG4gICAgICAgICAgZm9ybUZpZWxkcyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5oYXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSkudW5zdWJzY3JpYmU7XG5cbiAgICAvKipcbiAgICAgKiBoYW5kbGluZyB0cmFuc2xhdGlvbnMgYWZ0ZXIgY29udGVudCBpbml0LCBiZWNhdXNlIGF1dGhlbnRpY2F0b3IgYW5kIGl0c1xuICAgICAqIHRyYW5zbGF0aW9ucyBtaWdodCBiZSBpbml0aWFsaXplZCBiZWZvcmUgdGhlIG1haW4gYXBwJ3MgYG5nT25Jbml0YCBpcyBydW4uXG4gICAgICovXG4gICAgdGhpcy5zaWduSW5UaXRsZSA9IGdldFNpZ25JblRhYlRleHQoKTtcbiAgICB0aGlzLnNpZ25VcFRpdGxlID0gZ2V0U2lnblVwVGFiVGV4dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpZmVjeWNsZSBNZXRob2RzXG4gICAqL1xuICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5jb250ZXh0U2VydmljZS5jdXN0b21Db21wb25lbnRzID0gdGhpcy5tYXBDdXN0b21Db21wb25lbnRzKFxuICAgICAgdGhpcy5jdXN0b21Db21wb25lbnRRdWVyeVxuICAgICk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy51bnN1YnNjcmliZU1hY2hpbmUpIHRoaXMudW5zdWJzY3JpYmVNYWNoaW5lKCk7XG4gICAgaWYgKHRoaXMudW5zdWJzY3JpYmVIdWIpIHRoaXMudW5zdWJzY3JpYmVIdWIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGFzcyBGdW5jdGlvbnNcbiAgICovXG5cbiAgLy8gY29udGV4dCBwYXNzZWQgdG8gXCJhdXRoZW50aWNhdGVkXCIgc2xvdFxuICBwdWJsaWMgZ2V0IGNvbnRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aGVudGljYXRvci5zbG90Q29udGV4dDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcm91dGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aGVudGljYXRvci5yb3V0ZTtcbiAgfVxuXG4gIHB1YmxpYyBvblRhYkNoYW5nZSgpIHtcbiAgICBjb25zdCByb3V0ZSA9IHRoaXMuYXV0aGVudGljYXRvci5yb3V0ZTtcbiAgICBpZiAocm91dGUgPT09ICdzaWduSW4nKSB7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0b3IudG9TaWduVXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hdXRoZW50aWNhdG9yLnRvU2lnbkluKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhc1RhYnMoKSB7XG4gICAgY29uc3QgeyByb3V0ZSB9ID0gdGhpcy5hdXRoZW50aWNhdG9yO1xuICAgIHJldHVybiByb3V0ZSA9PT0gJ3NpZ25JbicgfHwgcm91dGUgPT09ICdzaWduVXAnO1xuICB9XG5cbiAgcHVibGljIGhhc1JvdXRlQ29tcG9uZW50KCkge1xuICAgIGNvbnN0IHsgcm91dGUgfSA9IHRoaXMuYXV0aGVudGljYXRvcjtcblxuICAgIHN3aXRjaCAocm91dGUpIHtcbiAgICAgIGNhc2UgJ2F1dGhlbnRpY2F0ZWQnOlxuICAgICAgY2FzZSAnaWRsZSc6XG4gICAgICBjYXNlICdzZXR1cCc6XG4gICAgICBjYXNlICdzaWduT3V0JzpcbiAgICAgIGNhc2UgJ3RyYW5zaXRpb24nOlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG1hcEN1c3RvbUNvbXBvbmVudHMoXG4gICAgY29tcG9uZW50UXVlcnk6IFF1ZXJ5TGlzdDxBbXBsaWZ5U2xvdERpcmVjdGl2ZT5cbiAgKTogUmVjb3JkPHN0cmluZywgVGVtcGxhdGVSZWY8YW55Pj4ge1xuICAgIGlmICghY29tcG9uZW50UXVlcnkpIHJldHVybiB7fTtcbiAgICBjb25zdCBjdXN0b21Db21wb25lbnRzOiBSZWNvcmQ8c3RyaW5nLCBUZW1wbGF0ZVJlZjxhbnk+PiA9IHt9O1xuICAgIGNvbXBvbmVudFF1ZXJ5LmZvckVhY2goKGNvbXBvbmVudCkgPT4ge1xuICAgICAgY3VzdG9tQ29tcG9uZW50c1tjb21wb25lbnQubmFtZV0gPSBjb21wb25lbnQudGVtcGxhdGU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY3VzdG9tQ29tcG9uZW50cztcbiAgfVxufVxuIiwiPGRpdlxuICBkYXRhLWFtcGxpZnktYXV0aGVudGljYXRvclxuICBbYXR0ci5kYXRhLXZhcmlhdGlvbl09XCJ2YXJpYXRpb25cIlxuICAqbmdJZj1cImhhc1JvdXRlQ29tcG9uZW50KClcIlxuPlxuICA8ZGl2IGRhdGEtYW1wbGlmeS1jb250YWluZXI+XG4gICAgPGFtcGxpZnktc2xvdCBuYW1lPVwiaGVhZGVyXCIgW2NvbnRleHRdPVwiY29udGV4dFwiPjwvYW1wbGlmeS1zbG90PlxuICAgIDxkaXZcbiAgICAgIGRhdGEtYW1wbGlmeS1yb3V0ZXJcbiAgICAgIFthdHRyLmRhdGEtYW1wbGlmeS1yb3V0ZXItY29udGVudF09XCJoYXNUYWJzKCkgPyB1bmRlZmluZWQgOiAnJ1wiXG4gICAgPlxuICAgICAgPGFtcGxpZnktdGFic1xuICAgICAgICAodGFiQ2hhbmdlKT1cIm9uVGFiQ2hhbmdlKClcIlxuICAgICAgICAqbmdJZj1cIihyb3V0ZSA9PT0gJ3NpZ25JbicgfHwgcm91dGUgPT09ICdzaWduVXAnKSAmJiAhaGlkZVNpZ25VcFwiXG4gICAgICA+XG4gICAgICAgIDxhbXBsaWZ5LXRhYi1pdGVtXG4gICAgICAgICAgW3RpdGxlXT1cInNpZ25JblRpdGxlXCJcbiAgICAgICAgICBbYWN0aXZlXT1cInJvdXRlID09PSAnc2lnbkluJ1wiXG4gICAgICAgICAgZGF0YS1hbXBsaWZ5LXJvdXRlci1jb250ZW50XG4gICAgICAgID5cbiAgICAgICAgICA8IS0tIHNpZ25JbiBjb21wb25lbnQgLS0+XG4gICAgICAgICAgPGFtcGxpZnktc2xvdFxuICAgICAgICAgICAgbmFtZT1cInNpZ24taW5cIlxuICAgICAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICAgICAqbmdJZj1cInJvdXRlID09PSAnc2lnbkluJ1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGFtcGxpZnktc2lnbi1pbj48L2FtcGxpZnktc2lnbi1pbj5cbiAgICAgICAgICA8L2FtcGxpZnktc2xvdD5cbiAgICAgICAgPC9hbXBsaWZ5LXRhYi1pdGVtPlxuICAgICAgICA8YW1wbGlmeS10YWItaXRlbVxuICAgICAgICAgIFt0aXRsZV09XCJzaWduVXBUaXRsZVwiXG4gICAgICAgICAgW2FjdGl2ZV09XCJyb3V0ZSA9PT0gJ3NpZ25VcCdcIlxuICAgICAgICAgIGRhdGEtYW1wbGlmeS1yb3V0ZXItY29udGVudFxuICAgICAgICA+XG4gICAgICAgICAgPCEtLSBzaWduVXAgY29tcG9uZW50IC0tPlxuICAgICAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgICAgIG5hbWU9XCJzaWduLXVwXCJcbiAgICAgICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAgICAgKm5nSWY9XCJyb3V0ZSA9PT0gJ3NpZ25VcCdcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxhbXBsaWZ5LXNpZ24tdXA+PC9hbXBsaWZ5LXNpZ24tdXA+XG4gICAgICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG4gICAgICAgIDwvYW1wbGlmeS10YWItaXRlbT5cbiAgICAgIDwvYW1wbGlmeS10YWJzPlxuXG4gICAgICA8YW1wbGlmeS1zbG90XG4gICAgICAgIG5hbWU9XCJzaWduLWluXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdzaWduSW4nICYmIGhpZGVTaWduVXBcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS1zaWduLWluPjwvYW1wbGlmeS1zaWduLWluPlxuICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG5cbiAgICAgIDwhLS0gY29uZmlybVNpZ25VcCBjb250ZW50IC0tPlxuICAgICAgPGFtcGxpZnktc2xvdFxuICAgICAgICBuYW1lPVwiY29uZmlybS1zaWduLXVwXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdjb25maXJtU2lnblVwJ1wiXG4gICAgICA+XG4gICAgICAgIDxhbXBsaWZ5LWNvbmZpcm0tc2lnbi11cD48L2FtcGxpZnktY29uZmlybS1zaWduLXVwPlxuICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG5cbiAgICAgIDwhLS0gY29uZmlybVNpZ25JbiBjb250ZW50IC0tPlxuICAgICAgPGFtcGxpZnktc2xvdFxuICAgICAgICBuYW1lPVwiY29uZmlybS1zaWduLWluXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdjb25maXJtU2lnbkluJ1wiXG4gICAgICA+XG4gICAgICAgIDxhbXBsaWZ5LWNvbmZpcm0tc2lnbi1pbj48L2FtcGxpZnktY29uZmlybS1zaWduLWluPlxuICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG5cbiAgICAgIDwhLS0gc2V0dXBUb3RwIGNvbnRlbnQgLS0+XG4gICAgICA8YW1wbGlmeS1zbG90XG4gICAgICAgIG5hbWU9XCJzZXR1cC10b3RwXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdzZXR1cFRPVFAnXCJcbiAgICAgID5cbiAgICAgICAgPGFtcGxpZnktc2V0dXAtdG90cD48L2FtcGxpZnktc2V0dXAtdG90cD5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIGZvcmNlTmV3UGFzc3dvcmQgY29udGVudCAtLT5cbiAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgbmFtZT1cImZvcmNlLW5ldy1wYXNzd29yZFwiXG4gICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAqbmdJZj1cInJvdXRlID09PSAnZm9yY2VOZXdQYXNzd29yZCdcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS1mb3JjZS1uZXctcGFzc3dvcmQ+PC9hbXBsaWZ5LWZvcmNlLW5ldy1wYXNzd29yZD5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIHJlc2V0UGFzc3dvcmQgY29udGVudCAtLT5cbiAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgbmFtZT1cInJlc2V0LXBhc3N3b3JkXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdyZXNldFBhc3N3b3JkJ1wiXG4gICAgICA+XG4gICAgICAgIDxhbXBsaWZ5LXJlc2V0LXBhc3N3b3JkPjwvYW1wbGlmeS1yZXNldC1wYXNzd29yZD5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIGNvbmZpcm1SZXNldFBhc3N3b3JkIGNvbnRlbnQgLS0+XG4gICAgICA8YW1wbGlmeS1zbG90XG4gICAgICAgIG5hbWU9XCJjb25maXJtLXJlc2V0LXBhc3N3b3JkXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdjb25maXJtUmVzZXRQYXNzd29yZCdcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS1jb25maXJtLXJlc2V0LXBhc3N3b3JkPjwvYW1wbGlmeS1jb25maXJtLXJlc2V0LXBhc3N3b3JkPlxuICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG5cbiAgICAgIDwhLS0gdmVyaWZ5VXNlciBjb250ZW50IC0tPlxuICAgICAgPGFtcGxpZnktc2xvdFxuICAgICAgICBuYW1lPVwidmVyaWZ5LXVzZXJcIlxuICAgICAgICBbY29udGV4dF09XCJjb250ZXh0XCJcbiAgICAgICAgKm5nSWY9XCJyb3V0ZSA9PT0gJ3ZlcmlmeVVzZXInXCJcbiAgICAgID5cbiAgICAgICAgPGFtcGxpZnktdmVyaWZ5LXVzZXI+PC9hbXBsaWZ5LXZlcmlmeS11c2VyPlxuICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG5cbiAgICAgIDwhLS0gY29uZmlybVZlcmlmeVVzZXIgY29udGVudCAtLT5cbiAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgbmFtZT1cImNvbmZpcm0tdmVyaWZ5LXVzZXJcIlxuICAgICAgICBbY29udGV4dF09XCJjb250ZXh0XCJcbiAgICAgICAgKm5nSWY9XCJyb3V0ZSA9PT0gJ2NvbmZpcm1WZXJpZnlVc2VyJ1wiXG4gICAgICA+XG4gICAgICAgIDxhbXBsaWZ5LWNvbmZpcm0tdmVyaWZ5LXVzZXI+PC9hbXBsaWZ5LWNvbmZpcm0tdmVyaWZ5LXVzZXI+XG4gICAgICA8L2FtcGxpZnktc2xvdD5cbiAgICA8L2Rpdj5cblxuICAgIDxhbXBsaWZ5LXNsb3QgbmFtZT1cImZvb3RlclwiIFtjb250ZXh0XT1cImNvbnRleHRcIj48L2FtcGxpZnktc2xvdD5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPCEtLSBzaWduZWRJbiBjb250ZW50IGlzIHJlbmRlcmVkIG91dHNpZGUgYXV0aGVudGljYXRvciBzbyBpdCdzIG5vdCBzdHlsZWQgYnkgYXV0aGVudGljYXRvciAtLT5cbjxhbXBsaWZ5LXNsb3RcbiAgbmFtZT1cImF1dGhlbnRpY2F0ZWRcIlxuICBbY29udGV4dF09XCJjb250ZXh0XCJcbiAgKm5nSWY9XCJyb3V0ZSA9PT0gJ2F1dGhlbnRpY2F0ZWQnXCJcbj5cbiAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuPC9hbXBsaWZ5LXNsb3Q+XG4iXX0=