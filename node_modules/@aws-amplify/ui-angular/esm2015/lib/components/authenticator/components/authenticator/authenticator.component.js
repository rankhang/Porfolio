import { Component, ContentChildren, Input, ViewEncapsulation, } from '@angular/core';
import { authenticatorTextUtil, configureComponent, } from '@aws-amplify/ui';
import { AmplifySlotDirective } from '../../../../utilities/amplify-slot/amplify-slot.directive';
import { CustomComponentsService } from '../../../../services/custom-components.service';
import { VERSION } from '../../../../../version';
import * as i0 from "@angular/core";
import * as i1 from "../../../../services/authenticator.service";
import * as i2 from "../../../../services/custom-components.service";
import * as i3 from "../../../../utilities/amplify-slot/amplify-slot.component";
import * as i4 from "../../../../primitives/tabs/tabs.component";
import * as i5 from "../../../../primitives/tab-item/tab-item.component";
import * as i6 from "../sign-in/sign-in.component";
import * as i7 from "../sign-up/sign-up.component";
import * as i8 from "../confirm-sign-up/confirm-sign-up.component";
import * as i9 from "../confirm-sign-in/confirm-sign-in.component";
import * as i10 from "../setup-totp/setup-totp.component";
import * as i11 from "../force-new-password/force-new-password.component";
import * as i12 from "../reset-password/reset-password.component";
import * as i13 from "../confirm-reset-password/amplify-confirm-reset-password.component";
import * as i14 from "../verify-user/verify-user.component";
import * as i15 from "../confirm-verify-user/amplify-confirm-verify-user.component";
import * as i16 from "@angular/common";
const { getSignInTabText, getSignUpTabText } = authenticatorTextUtil;
export class AuthenticatorComponent {
    constructor(authenticator, contextService, changeDetector) {
        this.authenticator = authenticator;
        this.contextService = contextService;
        this.changeDetector = changeDetector;
        this.customComponentQuery = null;
        // translated texts
        this.signInTitle = getSignInTabText();
        this.signUpTitle = getSignUpTabText();
        this.hasInitialized = false;
        this.isHandlingHubEvent = false;
    }
    // context passed to "authenticated" slot
    get context() {
        return this.authenticator.slotContext;
    }
    get route() {
        return this.authenticator.route;
    }
    ngOnInit() {
        const { initialState, loginMechanisms, services, signUpAttributes, socialProviders, formFields, } = this;
        configureComponent({
            packageName: '@aws-amplify/ui-angular',
            version: VERSION,
        });
        const { initializeMachine } = this.authenticator;
        this.authenticator.hubSubject.subscribe(() => {
            /*
             * Hub events aren't properly caught by Angular, because they are
             * synchronous events. Angular tracks async network events and
             * html events, but not synchronous events like hub.
             *
             * On any notable hub events, we run change detection manually.
             */
            this.changeDetector.detectChanges();
            /*
             * Hub events that we handle can lead to multiple state changes:
             * e.g. `authenticated` -> `signOut` -> initialState.
             *
             * We want to ensure change detection runs all the way, until
             * we reach back to the initial state. Setting the below flag
             * to true to until we reach initial state.
             */
            this.isHandlingHubEvent = true;
        });
        /**
         * Subscribes to state machine changes and sends INIT event
         * once machine reaches 'setup' state.
         */
        this.unsubscribeMachine = this.authenticator.subscribe(() => {
            const { route } = this.authenticator;
            if (this.isHandlingHubEvent) {
                this.changeDetector.detectChanges();
                const initialStateWithDefault = initialState !== null && initialState !== void 0 ? initialState : 'signIn';
                // We can stop manual change detection if we're back to the initial state
                if (route === initialStateWithDefault) {
                    this.isHandlingHubEvent = false;
                }
            }
            if (!this.hasInitialized && route === 'setup') {
                initializeMachine({
                    initialState,
                    loginMechanisms,
                    services,
                    signUpAttributes,
                    socialProviders,
                    formFields,
                });
                this.hasInitialized = true;
            }
        }).unsubscribe;
        /**
         * handling translations after content init, because authenticator and its
         * translations might be initialized before the main app's `ngOnInit` is run.
         */
        this.signInTitle = getSignInTabText();
        this.signUpTitle = getSignUpTabText();
    }
    /**
     * Lifecycle Methods
     */
    ngAfterContentInit() {
        this.contextService.customComponents = this.mapCustomComponents(this.customComponentQuery);
    }
    ngOnDestroy() {
        if (this.unsubscribeMachine)
            this.unsubscribeMachine();
    }
    /**
     * Class Functions
     */
    onTabChange() {
        const { route } = this.authenticator;
        if (route === 'signIn') {
            this.authenticator.toSignUp();
        }
        else {
            this.authenticator.toSignIn();
        }
    }
    hasTabs() {
        const { route } = this.authenticator;
        return route === 'signIn' || route === 'signUp';
    }
    hasRouteComponent() {
        const { route } = this.authenticator;
        switch (route) {
            case 'authenticated':
            case 'idle':
            case 'setup':
            case 'signOut':
            case 'transition':
                return false;
            default:
                return true;
        }
    }
    mapCustomComponents(componentQuery) {
        if (!componentQuery)
            return {};
        const customComponents = {};
        componentQuery.forEach((component) => {
            customComponents[component.name] = component.template;
        });
        return customComponents;
    }
}
AuthenticatorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: AuthenticatorComponent, deps: [{ token: i1.AuthenticatorService }, { token: i2.CustomComponentsService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
AuthenticatorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: AuthenticatorComponent, selector: "amplify-authenticator", inputs: { formFields: "formFields", initialState: "initialState", loginMechanisms: "loginMechanisms", services: "services", signUpAttributes: "signUpAttributes", socialProviders: "socialProviders", variation: "variation", hideSignUp: "hideSignUp" }, providers: [CustomComponentsService], queries: [{ propertyName: "customComponentQuery", predicate: AmplifySlotDirective }], ngImport: i0, template: "<div\n  data-amplify-authenticator\n  [attr.data-variation]=\"variation\"\n  *ngIf=\"hasRouteComponent()\"\n>\n  <div data-amplify-container>\n    <amplify-slot name=\"header\" [context]=\"context\"></amplify-slot>\n    <div\n      data-amplify-router\n      [attr.data-amplify-router-content]=\"hasTabs() ? undefined : ''\"\n    >\n      <amplify-tabs\n        (tabChange)=\"onTabChange()\"\n        *ngIf=\"(route === 'signIn' || route === 'signUp') && !hideSignUp\"\n      >\n        <amplify-tab-item\n          [title]=\"signInTitle\"\n          [active]=\"route === 'signIn'\"\n          data-amplify-router-content\n        >\n          <!-- signIn component -->\n          <amplify-slot\n            name=\"sign-in\"\n            [context]=\"context\"\n            *ngIf=\"route === 'signIn'\"\n          >\n            <amplify-sign-in></amplify-sign-in>\n          </amplify-slot>\n        </amplify-tab-item>\n        <amplify-tab-item\n          [title]=\"signUpTitle\"\n          [active]=\"route === 'signUp'\"\n          data-amplify-router-content\n        >\n          <!-- signUp component -->\n          <amplify-slot\n            name=\"sign-up\"\n            [context]=\"context\"\n            *ngIf=\"route === 'signUp'\"\n          >\n            <amplify-sign-up></amplify-sign-up>\n          </amplify-slot>\n        </amplify-tab-item>\n      </amplify-tabs>\n\n      <amplify-slot\n        name=\"sign-in\"\n        [context]=\"context\"\n        *ngIf=\"route === 'signIn' && hideSignUp\"\n      >\n        <amplify-sign-in></amplify-sign-in>\n      </amplify-slot>\n\n      <!-- confirmSignUp content -->\n      <amplify-slot\n        name=\"confirm-sign-up\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmSignUp'\"\n      >\n        <amplify-confirm-sign-up></amplify-confirm-sign-up>\n      </amplify-slot>\n\n      <!-- confirmSignIn content -->\n      <amplify-slot\n        name=\"confirm-sign-in\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmSignIn'\"\n      >\n        <amplify-confirm-sign-in></amplify-confirm-sign-in>\n      </amplify-slot>\n\n      <!-- setupTotp content -->\n      <amplify-slot\n        name=\"setup-totp\"\n        [context]=\"context\"\n        *ngIf=\"route === 'setupTOTP'\"\n      >\n        <amplify-setup-totp></amplify-setup-totp>\n      </amplify-slot>\n\n      <!-- forceNewPassword content -->\n      <amplify-slot\n        name=\"force-new-password\"\n        [context]=\"context\"\n        *ngIf=\"route === 'forceNewPassword'\"\n      >\n        <amplify-force-new-password></amplify-force-new-password>\n      </amplify-slot>\n\n      <!-- resetPassword content -->\n      <amplify-slot\n        name=\"reset-password\"\n        [context]=\"context\"\n        *ngIf=\"route === 'resetPassword'\"\n      >\n        <amplify-reset-password></amplify-reset-password>\n      </amplify-slot>\n\n      <!-- confirmResetPassword content -->\n      <amplify-slot\n        name=\"confirm-reset-password\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmResetPassword'\"\n      >\n        <amplify-confirm-reset-password></amplify-confirm-reset-password>\n      </amplify-slot>\n\n      <!-- verifyUser content -->\n      <amplify-slot\n        name=\"verify-user\"\n        [context]=\"context\"\n        *ngIf=\"route === 'verifyUser'\"\n      >\n        <amplify-verify-user></amplify-verify-user>\n      </amplify-slot>\n\n      <!-- confirmVerifyUser content -->\n      <amplify-slot\n        name=\"confirm-verify-user\"\n        [context]=\"context\"\n        *ngIf=\"route === 'confirmVerifyUser'\"\n      >\n        <amplify-confirm-verify-user></amplify-confirm-verify-user>\n      </amplify-slot>\n    </div>\n\n    <amplify-slot name=\"footer\" [context]=\"context\"></amplify-slot>\n  </div>\n</div>\n\n<!-- signedIn content is rendered outside authenticator so it's not styled by authenticator -->\n<amplify-slot\n  name=\"authenticated\"\n  [context]=\"context\"\n  *ngIf=\"route === 'authenticated'\"\n>\n  <ng-content></ng-content>\n</amplify-slot>\n", components: [{ type: i3.AmplifySlotComponent, selector: "amplify-slot", inputs: ["name", "context"] }, { type: i4.TabsComponent, selector: "amplify-tabs", outputs: ["tabChange"] }, { type: i5.TabItemComponent, selector: "amplify-tab-item", inputs: ["title", "active", "id", "labelledById", "tabIndex"] }, { type: i6.SignInComponent, selector: "amplify-sign-in" }, { type: i7.SignUpComponent, selector: "amplify-sign-up" }, { type: i8.ConfirmSignUpComponent, selector: "amplify-confirm-sign-up" }, { type: i9.ConfirmSignInComponent, selector: "amplify-confirm-sign-in" }, { type: i10.SetupTotpComponent, selector: "amplify-setup-totp" }, { type: i11.ForceNewPasswordComponent, selector: "amplify-force-new-password", inputs: ["headerText"] }, { type: i12.ResetPasswordComponent, selector: "amplify-reset-password", inputs: ["headerText"] }, { type: i13.ConfirmResetPasswordComponent, selector: "amplify-confirm-reset-password", inputs: ["headerText"] }, { type: i14.VerifyUserComponent, selector: "amplify-verify-user", inputs: ["headerText"] }, { type: i15.ConfirmVerifyUserComponent, selector: "amplify-confirm-verify-user", inputs: ["headerText"] }], directives: [{ type: i16.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], encapsulation: i0.ViewEncapsulation.None });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: AuthenticatorComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'amplify-authenticator',
                    templateUrl: './authenticator.component.html',
                    providers: [CustomComponentsService],
                    encapsulation: ViewEncapsulation.None,
                }]
        }], ctorParameters: function () { return [{ type: i1.AuthenticatorService }, { type: i2.CustomComponentsService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { formFields: [{
                type: Input
            }], initialState: [{
                type: Input
            }], loginMechanisms: [{
                type: Input
            }], services: [{
                type: Input
            }], signUpAttributes: [{
                type: Input
            }], socialProviders: [{
                type: Input
            }], variation: [{
                type: Input
            }], hideSignUp: [{
                type: Input
            }], customComponentQuery: [{
                type: ContentChildren,
                args: [AmplifySlotDirective]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0aGVudGljYXRvci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS1hbmd1bGFyL3NyYy9saWIvY29tcG9uZW50cy9hdXRoZW50aWNhdG9yL2NvbXBvbmVudHMvYXV0aGVudGljYXRvci9hdXRoZW50aWNhdG9yLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpLWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL2F1dGhlbnRpY2F0b3IvY29tcG9uZW50cy9hdXRoZW50aWNhdG9yL2F1dGhlbnRpY2F0b3IuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUdMLFNBQVMsRUFDVCxlQUFlLEVBQ2YsS0FBSyxFQUtMLGlCQUFpQixHQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBRUwscUJBQXFCLEVBQ3JCLGtCQUFrQixHQUVuQixNQUFNLGlCQUFpQixDQUFDO0FBQ3pCLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDJEQUEyRCxDQUFDO0FBQ2pHLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBRXpGLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWpELE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLHFCQUFxQixDQUFDO0FBUXJFLE1BQU0sT0FBTyxzQkFBc0I7SUF1QmpDLFlBQ1UsYUFBbUMsRUFDbkMsY0FBdUMsRUFDdkMsY0FBaUM7UUFGakMsa0JBQWEsR0FBYixhQUFhLENBQXNCO1FBQ25DLG1CQUFjLEdBQWQsY0FBYyxDQUF5QjtRQUN2QyxtQkFBYyxHQUFkLGNBQWMsQ0FBbUI7UUFibkMseUJBQW9CLEdBQW9DLElBQUksQ0FBQztRQUVyRSxtQkFBbUI7UUFDWixnQkFBVyxHQUFHLGdCQUFnQixFQUFFLENBQUM7UUFDakMsZ0JBQVcsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO1FBRWhDLG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCLHVCQUFrQixHQUFHLEtBQUssQ0FBQztJQU9oQyxDQUFDO0lBRUoseUNBQXlDO0lBQ3pDLElBQVcsT0FBTztRQUNoQixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDO0lBQ3hDLENBQUM7SUFFRCxJQUFXLEtBQUs7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO0lBQ2xDLENBQUM7SUFFRCxRQUFRO1FBQ04sTUFBTSxFQUNKLFlBQVksRUFDWixlQUFlLEVBQ2YsUUFBUSxFQUNSLGdCQUFnQixFQUNoQixlQUFlLEVBQ2YsVUFBVSxHQUNYLEdBQUcsSUFBSSxDQUFDO1FBRVQsa0JBQWtCLENBQUM7WUFDakIsV0FBVyxFQUFFLHlCQUF5QjtZQUN0QyxPQUFPLEVBQUUsT0FBTztTQUNqQixDQUFDLENBQUM7UUFFSCxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBRWpELElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDM0M7Ozs7OztlQU1HO1lBQ0gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUVwQzs7Ozs7OztlQU9HO1lBQ0gsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQztRQUVIOzs7V0FHRztRQUNILElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDMUQsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7WUFFckMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7Z0JBQzNCLElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYSxFQUFFLENBQUM7Z0JBRXBDLE1BQU0sdUJBQXVCLEdBQUcsWUFBWSxhQUFaLFlBQVksY0FBWixZQUFZLEdBQUksUUFBUSxDQUFDO2dCQUV6RCx5RUFBeUU7Z0JBQ3pFLElBQUksS0FBSyxLQUFLLHVCQUF1QixFQUFFO29CQUNyQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDO2lCQUNqQzthQUNGO1lBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLElBQUksS0FBSyxLQUFLLE9BQU8sRUFBRTtnQkFDN0MsaUJBQWlCLENBQUM7b0JBQ2hCLFlBQVk7b0JBQ1osZUFBZTtvQkFDZixRQUFRO29CQUNSLGdCQUFnQjtvQkFDaEIsZUFBZTtvQkFDZixVQUFVO2lCQUNYLENBQUMsQ0FBQztnQkFFSCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQzthQUM1QjtRQUNILENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztRQUVmOzs7V0FHRztRQUNILElBQUksQ0FBQyxXQUFXLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztRQUN0QyxJQUFJLENBQUMsV0FBVyxHQUFHLGdCQUFnQixFQUFFLENBQUM7SUFDeEMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsa0JBQWtCO1FBQ2hCLElBQUksQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUM3RCxJQUFJLENBQUMsb0JBQW9CLENBQzFCLENBQUM7SUFDSixDQUFDO0lBRUQsV0FBVztRQUNULElBQUksSUFBSSxDQUFDLGtCQUFrQjtZQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0lBQ3pELENBQUM7SUFFRDs7T0FFRztJQUNJLFdBQVc7UUFDaEIsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDckMsSUFBSSxLQUFLLEtBQUssUUFBUSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDL0I7YUFBTTtZQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDL0I7SUFDSCxDQUFDO0lBRU0sT0FBTztRQUNaLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQ3JDLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxLQUFLLEtBQUssUUFBUSxDQUFDO0lBQ2xELENBQUM7SUFFTSxpQkFBaUI7UUFDdEIsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFFckMsUUFBUSxLQUFLLEVBQUU7WUFDYixLQUFLLGVBQWUsQ0FBQztZQUNyQixLQUFLLE1BQU0sQ0FBQztZQUNaLEtBQUssT0FBTyxDQUFDO1lBQ2IsS0FBSyxTQUFTLENBQUM7WUFDZixLQUFLLFlBQVk7Z0JBQ2YsT0FBTyxLQUFLLENBQUM7WUFDZjtnQkFDRSxPQUFPLElBQUksQ0FBQztTQUNmO0lBQ0gsQ0FBQztJQUVPLG1CQUFtQixDQUN6QixjQUErQztRQUUvQyxJQUFJLENBQUMsY0FBYztZQUFFLE9BQU8sRUFBRSxDQUFDO1FBQy9CLE1BQU0sZ0JBQWdCLEdBQXlDLEVBQUUsQ0FBQztRQUNsRSxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7WUFDbkMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLGdCQUFnQixDQUFDO0lBQzFCLENBQUM7O29IQTNLVSxzQkFBc0I7d0dBQXRCLHNCQUFzQiwwU0FIdEIsQ0FBQyx1QkFBdUIsQ0FBQywrREFlbkIsb0JBQW9CLDZCQzNDdkMsNi9IQTBJQTs0RkQzR2Esc0JBQXNCO2tCQU5sQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSx1QkFBdUI7b0JBQ2pDLFdBQVcsRUFBRSxnQ0FBZ0M7b0JBQzdDLFNBQVMsRUFBRSxDQUFDLHVCQUF1QixDQUFDO29CQUNwQyxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtpQkFDdEM7aUxBSVUsVUFBVTtzQkFBbEIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csZUFBZTtzQkFBdkIsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBR0Usb0JBQW9CO3NCQUQzQixlQUFlO3VCQUFDLG9CQUFvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyQ29udGVudEluaXQsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgSW5wdXQsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBRdWVyeUxpc3QsXG4gIFRlbXBsYXRlUmVmLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBBdXRoZW50aWNhdG9yTWFjaGluZU9wdGlvbnMsXG4gIGF1dGhlbnRpY2F0b3JUZXh0VXRpbCxcbiAgY29uZmlndXJlQ29tcG9uZW50LFxuICBTb2NpYWxQcm92aWRlcixcbn0gZnJvbSAnQGF3cy1hbXBsaWZ5L3VpJztcbmltcG9ydCB7IEFtcGxpZnlTbG90RGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL2FtcGxpZnktc2xvdC9hbXBsaWZ5LXNsb3QuZGlyZWN0aXZlJztcbmltcG9ydCB7IEN1c3RvbUNvbXBvbmVudHNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2VydmljZXMvY3VzdG9tLWNvbXBvbmVudHMuc2VydmljZSc7XG5pbXBvcnQgeyBBdXRoZW50aWNhdG9yU2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NlcnZpY2VzL2F1dGhlbnRpY2F0b3Iuc2VydmljZSc7XG5pbXBvcnQgeyBWRVJTSU9OIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdmVyc2lvbic7XG5cbmNvbnN0IHsgZ2V0U2lnbkluVGFiVGV4dCwgZ2V0U2lnblVwVGFiVGV4dCB9ID0gYXV0aGVudGljYXRvclRleHRVdGlsO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhbXBsaWZ5LWF1dGhlbnRpY2F0b3InLFxuICB0ZW1wbGF0ZVVybDogJy4vYXV0aGVudGljYXRvci5jb21wb25lbnQuaHRtbCcsXG4gIHByb3ZpZGVyczogW0N1c3RvbUNvbXBvbmVudHNTZXJ2aWNlXSwgLy8gbWFrZSBzdXJlIGN1c3RvbSBjb21wb25lbnRzIGFyZSBzY29wZWQgdG8gdGhpcyBhdXRoZW50aWNhdG9yIG9ubHlcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbn0pXG5leHBvcnQgY2xhc3MgQXV0aGVudGljYXRvckNvbXBvbmVudFxuICBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCwgT25EZXN0cm95XG57XG4gIEBJbnB1dCgpIGZvcm1GaWVsZHM6IEF1dGhlbnRpY2F0b3JNYWNoaW5lT3B0aW9uc1snZm9ybUZpZWxkcyddO1xuICBASW5wdXQoKSBpbml0aWFsU3RhdGU6IEF1dGhlbnRpY2F0b3JNYWNoaW5lT3B0aW9uc1snaW5pdGlhbFN0YXRlJ107XG4gIEBJbnB1dCgpIGxvZ2luTWVjaGFuaXNtczogQXV0aGVudGljYXRvck1hY2hpbmVPcHRpb25zWydsb2dpbk1lY2hhbmlzbXMnXTtcbiAgQElucHV0KCkgc2VydmljZXM6IEF1dGhlbnRpY2F0b3JNYWNoaW5lT3B0aW9uc1snc2VydmljZXMnXTtcbiAgQElucHV0KCkgc2lnblVwQXR0cmlidXRlczogQXV0aGVudGljYXRvck1hY2hpbmVPcHRpb25zWydzaWduVXBBdHRyaWJ1dGVzJ107XG4gIEBJbnB1dCgpIHNvY2lhbFByb3ZpZGVyczogU29jaWFsUHJvdmlkZXJbXTtcbiAgQElucHV0KCkgdmFyaWF0aW9uOiAnZGVmYXVsdCcgfCAnbW9kYWwnO1xuICBASW5wdXQoKSBoaWRlU2lnblVwOiBib29sZWFuO1xuXG4gIEBDb250ZW50Q2hpbGRyZW4oQW1wbGlmeVNsb3REaXJlY3RpdmUpXG4gIHByaXZhdGUgY3VzdG9tQ29tcG9uZW50UXVlcnk6IFF1ZXJ5TGlzdDxBbXBsaWZ5U2xvdERpcmVjdGl2ZT4gPSBudWxsO1xuXG4gIC8vIHRyYW5zbGF0ZWQgdGV4dHNcbiAgcHVibGljIHNpZ25JblRpdGxlID0gZ2V0U2lnbkluVGFiVGV4dCgpO1xuICBwdWJsaWMgc2lnblVwVGl0bGUgPSBnZXRTaWduVXBUYWJUZXh0KCk7XG5cbiAgcHJpdmF0ZSBoYXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICBwcml2YXRlIGlzSGFuZGxpbmdIdWJFdmVudCA9IGZhbHNlO1xuICBwcml2YXRlIHVuc3Vic2NyaWJlTWFjaGluZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGF1dGhlbnRpY2F0b3I6IEF1dGhlbnRpY2F0b3JTZXJ2aWNlLFxuICAgIHByaXZhdGUgY29udGV4dFNlcnZpY2U6IEN1c3RvbUNvbXBvbmVudHNTZXJ2aWNlLFxuICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3I6IENoYW5nZURldGVjdG9yUmVmXG4gICkge31cblxuICAvLyBjb250ZXh0IHBhc3NlZCB0byBcImF1dGhlbnRpY2F0ZWRcIiBzbG90XG4gIHB1YmxpYyBnZXQgY29udGV4dCgpOiBBdXRoZW50aWNhdG9yU2VydmljZVsnc2xvdENvbnRleHQnXSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aGVudGljYXRvci5zbG90Q29udGV4dDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcm91dGUoKTogQXV0aGVudGljYXRvclNlcnZpY2VbJ3JvdXRlJ10ge1xuICAgIHJldHVybiB0aGlzLmF1dGhlbnRpY2F0b3Iucm91dGU7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBjb25zdCB7XG4gICAgICBpbml0aWFsU3RhdGUsXG4gICAgICBsb2dpbk1lY2hhbmlzbXMsXG4gICAgICBzZXJ2aWNlcyxcbiAgICAgIHNpZ25VcEF0dHJpYnV0ZXMsXG4gICAgICBzb2NpYWxQcm92aWRlcnMsXG4gICAgICBmb3JtRmllbGRzLFxuICAgIH0gPSB0aGlzO1xuXG4gICAgY29uZmlndXJlQ29tcG9uZW50KHtcbiAgICAgIHBhY2thZ2VOYW1lOiAnQGF3cy1hbXBsaWZ5L3VpLWFuZ3VsYXInLFxuICAgICAgdmVyc2lvbjogVkVSU0lPTixcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgaW5pdGlhbGl6ZU1hY2hpbmUgfSA9IHRoaXMuYXV0aGVudGljYXRvcjtcblxuICAgIHRoaXMuYXV0aGVudGljYXRvci5odWJTdWJqZWN0LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAvKlxuICAgICAgICogSHViIGV2ZW50cyBhcmVuJ3QgcHJvcGVybHkgY2F1Z2h0IGJ5IEFuZ3VsYXIsIGJlY2F1c2UgdGhleSBhcmVcbiAgICAgICAqIHN5bmNocm9ub3VzIGV2ZW50cy4gQW5ndWxhciB0cmFja3MgYXN5bmMgbmV0d29yayBldmVudHMgYW5kXG4gICAgICAgKiBodG1sIGV2ZW50cywgYnV0IG5vdCBzeW5jaHJvbm91cyBldmVudHMgbGlrZSBodWIuXG4gICAgICAgKlxuICAgICAgICogT24gYW55IG5vdGFibGUgaHViIGV2ZW50cywgd2UgcnVuIGNoYW5nZSBkZXRlY3Rpb24gbWFudWFsbHkuXG4gICAgICAgKi9cbiAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgICAvKlxuICAgICAgICogSHViIGV2ZW50cyB0aGF0IHdlIGhhbmRsZSBjYW4gbGVhZCB0byBtdWx0aXBsZSBzdGF0ZSBjaGFuZ2VzOlxuICAgICAgICogZS5nLiBgYXV0aGVudGljYXRlZGAgLT4gYHNpZ25PdXRgIC0+IGluaXRpYWxTdGF0ZS5cbiAgICAgICAqXG4gICAgICAgKiBXZSB3YW50IHRvIGVuc3VyZSBjaGFuZ2UgZGV0ZWN0aW9uIHJ1bnMgYWxsIHRoZSB3YXksIHVudGlsXG4gICAgICAgKiB3ZSByZWFjaCBiYWNrIHRvIHRoZSBpbml0aWFsIHN0YXRlLiBTZXR0aW5nIHRoZSBiZWxvdyBmbGFnXG4gICAgICAgKiB0byB0cnVlIHRvIHVudGlsIHdlIHJlYWNoIGluaXRpYWwgc3RhdGUuXG4gICAgICAgKi9cbiAgICAgIHRoaXMuaXNIYW5kbGluZ0h1YkV2ZW50ID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gc3RhdGUgbWFjaGluZSBjaGFuZ2VzIGFuZCBzZW5kcyBJTklUIGV2ZW50XG4gICAgICogb25jZSBtYWNoaW5lIHJlYWNoZXMgJ3NldHVwJyBzdGF0ZS5cbiAgICAgKi9cbiAgICB0aGlzLnVuc3Vic2NyaWJlTWFjaGluZSA9IHRoaXMuYXV0aGVudGljYXRvci5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgY29uc3QgeyByb3V0ZSB9ID0gdGhpcy5hdXRoZW50aWNhdG9yO1xuXG4gICAgICBpZiAodGhpcy5pc0hhbmRsaW5nSHViRXZlbnQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICAgICAgY29uc3QgaW5pdGlhbFN0YXRlV2l0aERlZmF1bHQgPSBpbml0aWFsU3RhdGUgPz8gJ3NpZ25Jbic7XG5cbiAgICAgICAgLy8gV2UgY2FuIHN0b3AgbWFudWFsIGNoYW5nZSBkZXRlY3Rpb24gaWYgd2UncmUgYmFjayB0byB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgICAgICBpZiAocm91dGUgPT09IGluaXRpYWxTdGF0ZVdpdGhEZWZhdWx0KSB7XG4gICAgICAgICAgdGhpcy5pc0hhbmRsaW5nSHViRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuaGFzSW5pdGlhbGl6ZWQgJiYgcm91dGUgPT09ICdzZXR1cCcpIHtcbiAgICAgICAgaW5pdGlhbGl6ZU1hY2hpbmUoe1xuICAgICAgICAgIGluaXRpYWxTdGF0ZSxcbiAgICAgICAgICBsb2dpbk1lY2hhbmlzbXMsXG4gICAgICAgICAgc2VydmljZXMsXG4gICAgICAgICAgc2lnblVwQXR0cmlidXRlcyxcbiAgICAgICAgICBzb2NpYWxQcm92aWRlcnMsXG4gICAgICAgICAgZm9ybUZpZWxkcyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5oYXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSkudW5zdWJzY3JpYmU7XG5cbiAgICAvKipcbiAgICAgKiBoYW5kbGluZyB0cmFuc2xhdGlvbnMgYWZ0ZXIgY29udGVudCBpbml0LCBiZWNhdXNlIGF1dGhlbnRpY2F0b3IgYW5kIGl0c1xuICAgICAqIHRyYW5zbGF0aW9ucyBtaWdodCBiZSBpbml0aWFsaXplZCBiZWZvcmUgdGhlIG1haW4gYXBwJ3MgYG5nT25Jbml0YCBpcyBydW4uXG4gICAgICovXG4gICAgdGhpcy5zaWduSW5UaXRsZSA9IGdldFNpZ25JblRhYlRleHQoKTtcbiAgICB0aGlzLnNpZ25VcFRpdGxlID0gZ2V0U2lnblVwVGFiVGV4dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpZmVjeWNsZSBNZXRob2RzXG4gICAqL1xuICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5jb250ZXh0U2VydmljZS5jdXN0b21Db21wb25lbnRzID0gdGhpcy5tYXBDdXN0b21Db21wb25lbnRzKFxuICAgICAgdGhpcy5jdXN0b21Db21wb25lbnRRdWVyeVxuICAgICk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy51bnN1YnNjcmliZU1hY2hpbmUpIHRoaXMudW5zdWJzY3JpYmVNYWNoaW5lKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xhc3MgRnVuY3Rpb25zXG4gICAqL1xuICBwdWJsaWMgb25UYWJDaGFuZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgeyByb3V0ZSB9ID0gdGhpcy5hdXRoZW50aWNhdG9yO1xuICAgIGlmIChyb3V0ZSA9PT0gJ3NpZ25JbicpIHtcbiAgICAgIHRoaXMuYXV0aGVudGljYXRvci50b1NpZ25VcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0b3IudG9TaWduSW4oKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFzVGFicygpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IHJvdXRlIH0gPSB0aGlzLmF1dGhlbnRpY2F0b3I7XG4gICAgcmV0dXJuIHJvdXRlID09PSAnc2lnbkluJyB8fCByb3V0ZSA9PT0gJ3NpZ25VcCc7XG4gIH1cblxuICBwdWJsaWMgaGFzUm91dGVDb21wb25lbnQoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyByb3V0ZSB9ID0gdGhpcy5hdXRoZW50aWNhdG9yO1xuXG4gICAgc3dpdGNoIChyb3V0ZSkge1xuICAgICAgY2FzZSAnYXV0aGVudGljYXRlZCc6XG4gICAgICBjYXNlICdpZGxlJzpcbiAgICAgIGNhc2UgJ3NldHVwJzpcbiAgICAgIGNhc2UgJ3NpZ25PdXQnOlxuICAgICAgY2FzZSAndHJhbnNpdGlvbic6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbWFwQ3VzdG9tQ29tcG9uZW50cyhcbiAgICBjb21wb25lbnRRdWVyeTogUXVlcnlMaXN0PEFtcGxpZnlTbG90RGlyZWN0aXZlPlxuICApOiBSZWNvcmQ8c3RyaW5nLCBUZW1wbGF0ZVJlZjx1bmtub3duPj4ge1xuICAgIGlmICghY29tcG9uZW50UXVlcnkpIHJldHVybiB7fTtcbiAgICBjb25zdCBjdXN0b21Db21wb25lbnRzOiBSZWNvcmQ8c3RyaW5nLCBUZW1wbGF0ZVJlZjx1bmtub3duPj4gPSB7fTtcbiAgICBjb21wb25lbnRRdWVyeS5mb3JFYWNoKChjb21wb25lbnQpID0+IHtcbiAgICAgIGN1c3RvbUNvbXBvbmVudHNbY29tcG9uZW50Lm5hbWVdID0gY29tcG9uZW50LnRlbXBsYXRlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGN1c3RvbUNvbXBvbmVudHM7XG4gIH1cbn1cbiIsIjxkaXZcbiAgZGF0YS1hbXBsaWZ5LWF1dGhlbnRpY2F0b3JcbiAgW2F0dHIuZGF0YS12YXJpYXRpb25dPVwidmFyaWF0aW9uXCJcbiAgKm5nSWY9XCJoYXNSb3V0ZUNvbXBvbmVudCgpXCJcbj5cbiAgPGRpdiBkYXRhLWFtcGxpZnktY29udGFpbmVyPlxuICAgIDxhbXBsaWZ5LXNsb3QgbmFtZT1cImhlYWRlclwiIFtjb250ZXh0XT1cImNvbnRleHRcIj48L2FtcGxpZnktc2xvdD5cbiAgICA8ZGl2XG4gICAgICBkYXRhLWFtcGxpZnktcm91dGVyXG4gICAgICBbYXR0ci5kYXRhLWFtcGxpZnktcm91dGVyLWNvbnRlbnRdPVwiaGFzVGFicygpID8gdW5kZWZpbmVkIDogJydcIlxuICAgID5cbiAgICAgIDxhbXBsaWZ5LXRhYnNcbiAgICAgICAgKHRhYkNoYW5nZSk9XCJvblRhYkNoYW5nZSgpXCJcbiAgICAgICAgKm5nSWY9XCIocm91dGUgPT09ICdzaWduSW4nIHx8IHJvdXRlID09PSAnc2lnblVwJykgJiYgIWhpZGVTaWduVXBcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS10YWItaXRlbVxuICAgICAgICAgIFt0aXRsZV09XCJzaWduSW5UaXRsZVwiXG4gICAgICAgICAgW2FjdGl2ZV09XCJyb3V0ZSA9PT0gJ3NpZ25JbidcIlxuICAgICAgICAgIGRhdGEtYW1wbGlmeS1yb3V0ZXItY29udGVudFxuICAgICAgICA+XG4gICAgICAgICAgPCEtLSBzaWduSW4gY29tcG9uZW50IC0tPlxuICAgICAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgICAgIG5hbWU9XCJzaWduLWluXCJcbiAgICAgICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAgICAgKm5nSWY9XCJyb3V0ZSA9PT0gJ3NpZ25JbidcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxhbXBsaWZ5LXNpZ24taW4+PC9hbXBsaWZ5LXNpZ24taW4+XG4gICAgICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG4gICAgICAgIDwvYW1wbGlmeS10YWItaXRlbT5cbiAgICAgICAgPGFtcGxpZnktdGFiLWl0ZW1cbiAgICAgICAgICBbdGl0bGVdPVwic2lnblVwVGl0bGVcIlxuICAgICAgICAgIFthY3RpdmVdPVwicm91dGUgPT09ICdzaWduVXAnXCJcbiAgICAgICAgICBkYXRhLWFtcGxpZnktcm91dGVyLWNvbnRlbnRcbiAgICAgICAgPlxuICAgICAgICAgIDwhLS0gc2lnblVwIGNvbXBvbmVudCAtLT5cbiAgICAgICAgICA8YW1wbGlmeS1zbG90XG4gICAgICAgICAgICBuYW1lPVwic2lnbi11cFwiXG4gICAgICAgICAgICBbY29udGV4dF09XCJjb250ZXh0XCJcbiAgICAgICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdzaWduVXAnXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8YW1wbGlmeS1zaWduLXVwPjwvYW1wbGlmeS1zaWduLXVwPlxuICAgICAgICAgIDwvYW1wbGlmeS1zbG90PlxuICAgICAgICA8L2FtcGxpZnktdGFiLWl0ZW0+XG4gICAgICA8L2FtcGxpZnktdGFicz5cblxuICAgICAgPGFtcGxpZnktc2xvdFxuICAgICAgICBuYW1lPVwic2lnbi1pblwiXG4gICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAqbmdJZj1cInJvdXRlID09PSAnc2lnbkluJyAmJiBoaWRlU2lnblVwXCJcbiAgICAgID5cbiAgICAgICAgPGFtcGxpZnktc2lnbi1pbj48L2FtcGxpZnktc2lnbi1pbj5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIGNvbmZpcm1TaWduVXAgY29udGVudCAtLT5cbiAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgbmFtZT1cImNvbmZpcm0tc2lnbi11cFwiXG4gICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAqbmdJZj1cInJvdXRlID09PSAnY29uZmlybVNpZ25VcCdcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS1jb25maXJtLXNpZ24tdXA+PC9hbXBsaWZ5LWNvbmZpcm0tc2lnbi11cD5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIGNvbmZpcm1TaWduSW4gY29udGVudCAtLT5cbiAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgbmFtZT1cImNvbmZpcm0tc2lnbi1pblwiXG4gICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAqbmdJZj1cInJvdXRlID09PSAnY29uZmlybVNpZ25JbidcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS1jb25maXJtLXNpZ24taW4+PC9hbXBsaWZ5LWNvbmZpcm0tc2lnbi1pbj5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIHNldHVwVG90cCBjb250ZW50IC0tPlxuICAgICAgPGFtcGxpZnktc2xvdFxuICAgICAgICBuYW1lPVwic2V0dXAtdG90cFwiXG4gICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAqbmdJZj1cInJvdXRlID09PSAnc2V0dXBUT1RQJ1wiXG4gICAgICA+XG4gICAgICAgIDxhbXBsaWZ5LXNldHVwLXRvdHA+PC9hbXBsaWZ5LXNldHVwLXRvdHA+XG4gICAgICA8L2FtcGxpZnktc2xvdD5cblxuICAgICAgPCEtLSBmb3JjZU5ld1Bhc3N3b3JkIGNvbnRlbnQgLS0+XG4gICAgICA8YW1wbGlmeS1zbG90XG4gICAgICAgIG5hbWU9XCJmb3JjZS1uZXctcGFzc3dvcmRcIlxuICAgICAgICBbY29udGV4dF09XCJjb250ZXh0XCJcbiAgICAgICAgKm5nSWY9XCJyb3V0ZSA9PT0gJ2ZvcmNlTmV3UGFzc3dvcmQnXCJcbiAgICAgID5cbiAgICAgICAgPGFtcGxpZnktZm9yY2UtbmV3LXBhc3N3b3JkPjwvYW1wbGlmeS1mb3JjZS1uZXctcGFzc3dvcmQ+XG4gICAgICA8L2FtcGxpZnktc2xvdD5cblxuICAgICAgPCEtLSByZXNldFBhc3N3b3JkIGNvbnRlbnQgLS0+XG4gICAgICA8YW1wbGlmeS1zbG90XG4gICAgICAgIG5hbWU9XCJyZXNldC1wYXNzd29yZFwiXG4gICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAqbmdJZj1cInJvdXRlID09PSAncmVzZXRQYXNzd29yZCdcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS1yZXNldC1wYXNzd29yZD48L2FtcGxpZnktcmVzZXQtcGFzc3dvcmQ+XG4gICAgICA8L2FtcGxpZnktc2xvdD5cblxuICAgICAgPCEtLSBjb25maXJtUmVzZXRQYXNzd29yZCBjb250ZW50IC0tPlxuICAgICAgPGFtcGxpZnktc2xvdFxuICAgICAgICBuYW1lPVwiY29uZmlybS1yZXNldC1wYXNzd29yZFwiXG4gICAgICAgIFtjb250ZXh0XT1cImNvbnRleHRcIlxuICAgICAgICAqbmdJZj1cInJvdXRlID09PSAnY29uZmlybVJlc2V0UGFzc3dvcmQnXCJcbiAgICAgID5cbiAgICAgICAgPGFtcGxpZnktY29uZmlybS1yZXNldC1wYXNzd29yZD48L2FtcGxpZnktY29uZmlybS1yZXNldC1wYXNzd29yZD5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIHZlcmlmeVVzZXIgY29udGVudCAtLT5cbiAgICAgIDxhbXBsaWZ5LXNsb3RcbiAgICAgICAgbmFtZT1cInZlcmlmeS11c2VyXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICd2ZXJpZnlVc2VyJ1wiXG4gICAgICA+XG4gICAgICAgIDxhbXBsaWZ5LXZlcmlmeS11c2VyPjwvYW1wbGlmeS12ZXJpZnktdXNlcj5cbiAgICAgIDwvYW1wbGlmeS1zbG90PlxuXG4gICAgICA8IS0tIGNvbmZpcm1WZXJpZnlVc2VyIGNvbnRlbnQgLS0+XG4gICAgICA8YW1wbGlmeS1zbG90XG4gICAgICAgIG5hbWU9XCJjb25maXJtLXZlcmlmeS11c2VyXCJcbiAgICAgICAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICAgICAgICpuZ0lmPVwicm91dGUgPT09ICdjb25maXJtVmVyaWZ5VXNlcidcIlxuICAgICAgPlxuICAgICAgICA8YW1wbGlmeS1jb25maXJtLXZlcmlmeS11c2VyPjwvYW1wbGlmeS1jb25maXJtLXZlcmlmeS11c2VyPlxuICAgICAgPC9hbXBsaWZ5LXNsb3Q+XG4gICAgPC9kaXY+XG5cbiAgICA8YW1wbGlmeS1zbG90IG5hbWU9XCJmb290ZXJcIiBbY29udGV4dF09XCJjb250ZXh0XCI+PC9hbXBsaWZ5LXNsb3Q+XG4gIDwvZGl2PlxuPC9kaXY+XG5cbjwhLS0gc2lnbmVkSW4gY29udGVudCBpcyByZW5kZXJlZCBvdXRzaWRlIGF1dGhlbnRpY2F0b3Igc28gaXQncyBub3Qgc3R5bGVkIGJ5IGF1dGhlbnRpY2F0b3IgLS0+XG48YW1wbGlmeS1zbG90XG4gIG5hbWU9XCJhdXRoZW50aWNhdGVkXCJcbiAgW2NvbnRleHRdPVwiY29udGV4dFwiXG4gICpuZ0lmPVwicm91dGUgPT09ICdhdXRoZW50aWNhdGVkJ1wiXG4+XG4gIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbjwvYW1wbGlmeS1zbG90PlxuIl19